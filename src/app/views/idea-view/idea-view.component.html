<div id="container">

    <app-top-bar left-item="back">
        <div class="spacer"></div>
        <app-profile-picture 
            class="pointer"
            [user]="auth.user$|async" 
            [routerLink]="['/', 'ideas', 'profile']"
        ></app-profile-picture>
    </app-top-bar>

    <div id="cover">
        <div 
            id="cover-background" 
            class="bg cover"
            [style.backgroundImage]="'url(assets/default-cover-picture.png)'"
        ></div>

        <div id="goals">
            <app-h-scroll 
                [hide-shadows]="true"
                left-padding="calc(2 * var(--gutter) + 32px)"
            >
                <app-goal-chip 
                    *ngFor="let g of idea?.goals" 
                    [goal]="g"
                    [routerLink]="['/', 'ideas', 'goal', g.id]"
                ></app-goal-chip>
            </app-h-scroll>
        </div>
    </div>

    <div id="page-content" class="flex column large-gap">

        <div id="header" class="flex column align-start">
            <h1 id="title" class="no-margin-bottom">{{ idea?.title }}</h1>
            <div id="author">
                <app-profile-picture 
                    [user]="idea?.author" 
                    class="pointer"
                    [routerLink]="['/', 'ideas', 'user', idea?.author?.id]"
                ></app-profile-picture>
                <p class="no-margin-bottom">
                    <span 
                        id="author-name" 
                        class="pointer"
                        [routerLink]="['/', 'ideas', 'user', idea?.author?.id]"
                    >
                        {{ idea?.author?.name }}
                    </span>
                    <span id="date"> - {{ time.makeAgo(idea?.date) }}</span>
                </p>
            </div>
            <div id="external-links" *ngIf="idea?.externalLinks?.length">
                <app-h-scroll left-padding="calc(2 * var(--gutter) + 32px)">
                    <mat-icon id="open-in-new">open_in_new</mat-icon>
                    <app-external-link 
                        *ngFor="let el of idea?.externalLinks" 
                        [external-link]="el"
                    ></app-external-link>
                </app-h-scroll>
                <div id="external-link-label">External links</div>
            </div>
        </div>
        
        <div id="content">
            {{ idea?.content }}
        </div>

        <div id="input" class="flex gutter">
            <app-profile-picture [user]="auth.user$|async"></app-profile-picture>
            <input type="text" placeholder="What do you think?">
            <app-chip
                label="Comment"
                color="var(--green)"
                icon="send"
            ></app-chip>
        </div>

        <app-comment-section
            *ngIf="comments && comments.length"
            [comments]="comments"
            (sort-by-change)="onSortByChange($event)"
        ></app-comment-section>

    </div>

</div>
